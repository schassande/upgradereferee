<ion-header>
    <ion-toolbar>
        <ion-buttons slot="start">
            <ion-button routerLink="/competition/list" detail>
                <ion-icon name="arrow-back"></ion-icon>
            </ion-button>
        </ion-buttons>
        <ion-title style="text-align: center;">Competition Home</ion-title>
        <ion-buttons slot="end">
            <ion-menu-button autoHide="false" menu="main"></ion-menu-button>
        </ion-buttons>
    </ion-toolbar>
</ion-header>

<ion-content *ngIf="competition && !loading">
    <ion-fab vertical="bottom" horizontal="end" slot="fixed">
        <ion-row>
            <ion-col *ngIf="canEdit || isAdmin">
                <ion-fab-button (click)="onDelete()" style='--background:red; font-size: 1.6em;'>
                    <ion-icon name="trash"></ion-icon>
                </ion-fab-button>
            </ion-col>
            <ion-col *ngIf="canEdit || isAdmin">
                <ion-fab-button routerLink="/competition/{{competition.id}}/edit" style='--background:green; font-size: 1.6em;'>
                    <ion-icon name="create-outline"></ion-icon>
                </ion-fab-button>
            </ion-col>
            <ion-col *ngIf="isRefereeCoachOfCompetition || isAdmin">
                <ion-fab-button routerLink="/competition/{{competition.id}}/votes" style='--background:orange; font-size: 1.6em;'>
                    P
                    <ion-icon name="ribbon-outline"></ion-icon>
                </ion-fab-button>
            </ion-col>

            <ion-col *ngIf="isRefereeCoachOfCompetition">
                <ion-fab-button routerLink="/upgrade/voting" [queryParams]="{competitionId : competition.id }" style='--background:blue; font-size: 1.6em;'>
                    C
                    <ion-icon name="ribbon-outline"></ion-icon>
                </ion-fab-button>
            </ion-col>
        </ion-row>
    </ion-fab>
    <ion-card>
        <ion-card-header style="text-align: center;">
            <ion-card-title>{{competition.name}}</ion-card-title>
            <ion-card-subtitle>in {{competition.country}} / {{competition.region}}</ion-card-subtitle>
        </ion-card-header>
        <ion-card-content>
            Date(s):
            <div style="text-align: center;">
                <div *ngFor="let day of competition.days">{{dateService.date2string(day)}}</div>
            </div>
            <div>Category: Open:{{competition.category}}, senior:{{competition.categorySenior}}</div>
            <div *ngIf="owner"><br>Own by {{owner}}</div>
        </ion-card-content>
    </ion-card>
    <div style="text-align: center; width: 100%; margin: 20px;" *ngIf="isRefereeCoachOfCompetition || isAdmin"><a routerLink="/competition/{{competition.id}}/upgrades">See referee upgrades</a> </div>
    <ion-card>
        <ion-card-header>
            <ion-card-title style="text-align: center;">
                <span>Referee Coach Panel ({{competition.refereeCoaches.length}})</span>
                <ion-icon *ngIf="canEdit" size="large" name="create-outline" routerLink="/competition/{{competition.id}}/coaches" style="float: right;"></ion-icon>
            </ion-card-title>
        </ion-card-header>
        <ion-card-content>
            <ion-list>
                <ion-item *ngFor="let coachRef of competition.refereeCoaches">
                    <ion-label>{{coachRef.coachShortName}} <span *ngIf="coachRef.coachId === competition.refereePanelDirectorId">(Director)</span></ion-label>
                    <ion-icon slot="end" name="eye-outline" routerLink="/referee-coach/view/{{coachRef.coachId}}"></ion-icon>
                </ion-item>
            </ion-list>
        </ion-card-content>
    </ion-card>
    <ion-card *ngIf="referees">
        <ion-card-header style="text-align: center;">
            <ion-card-title>
                <span>Referees ({{referees.length}})</span>
                <ion-icon *ngIf="canEdit" size="large" name="create-outline" routerLink="/competition/{{competition.id}}/referees" style="float: right;"></ion-icon>
            </ion-card-title>
        </ion-card-header>
        <ion-card-content>
            <ion-list>
                <ion-item *ngFor="let referee of referees">
                    <ion-label>{{referee.shortName}} - {{referee.firstName}} {{referee.lastName}}</ion-label>
                    <ion-icon slot="end" name="eye-outline" routerLink="/referee/view/{{referee.id}}"></ion-icon>
                    <img slot="end" src="assets/imgs/logo.png" height="30" *ngIf="isUpgradableReferee(referee) && (isRefereeCoachOfCompetition || isAdmin)" routerLink="/referee/votes/{{referee.id}}" />
                </ion-item>
            </ion-list>
        </ion-card-content>
    </ion-card>
    <div style="height: 100px;"></div>
</ion-content>